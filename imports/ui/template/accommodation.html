<template name="accommodationsList">
    <ul>
    {{#each accommodation }}
        <li class='adresse {{selectedAdresse}}'>{{ address }} {{additionalAddress}}, {{zipCode}} {{location}}</li>
    {{/each}}
    </ul>
</template>

<!--Super template-->

<template name="accommodationTemplate">
    {{#if currentUser}}
    <!-- check if there is a host room for the current user-->
    {{#if isAccommodation}}
        {{> updateAccommodation}}
    {{else}}
        {{> addAccommodation}}
    {{/if}}
    {{/if}}
</template>

<template name="addAccommodation">

    <!-- add accommotations templates -->

    <h2>Proposition de logements</h2>
    <form class="addAccommodation">  
    {{clearSession}}  
    {{#if Template.subscriptionsReady}}

    <!-- look for host profil address -->

        {{#if actual_location}}
            {{> actualAddress}}
        {{else}}
            {{> addressForm}}
        {{/if}}
    {{/if}}

    <!-- Fire simpleCal template -->
    {{> calendar_template}}

    <button type="submit">Terminer</button>
    </form>
</template>

<template name="addressForm">
    <!-- add/update address form : available for addAccommodation template and updateAccomodation -->
    <fieldset>
        {{#if Template.subscriptionsReady}}
        {{#if isLocation}}
                <legend>Adresse d'accueil actuelle</legend>
                <label for="address">Adresse du logement</label>
                <input type="text" name="address" id="address" value="{{availableLocation.[0]}}"><br>

                <label for="num">N°</label> 
                <input type="text" name="location_number" id="location_number" value="{{availableLocation.[1]}}"><br>

                <label for="zipCode">NPA</label>
                <input type="number" name="zipCode" id="zipCode" value="{{availableLocation.[3]}}"><br>
    
                <label for="location">Localité</label>
                <input type="text" name="location" id="location" value="{{availableLocation.[2]}}"><br> 
                
                <label for="availablePlaces">Nombre de personnes</label>
                <input type="number" name="availablePlaces" id="availablePlaces">
            {{else}}
                <legend>Ajouter une adresse</legend> 
                <label for="address">Rue</label>        
                <input type="text" name="address" id="address" value="Adresse"><br>

                <label for="num">N°</label> 
                <input type="text" name="location_number" id="location_number" value="Numéro"><br>

                <label for="zipCode">NPA</label>
                <input type="number" name="zipCode" id="zipCode" value="NPA"><br>
    
                <label for="location">Localité</label>
                <input type="text" name="location" id="location" value="Localité"><br> 

                <label for="availablePlaces">Nombre de personnes</label>
                <input type="number" name="availablePlaces" id="availablePlaces">

        {{/if}}
        {{/if}}
    </fieldset>
</template>

<template name="actualAddress">

    <!-- check if host profil has an address if true suggest add the same address -->

    {{#if sessionReady}}
        {{#if linkValue}}
            {{#each actualAddressValue}}
                <span>{{this}}</span><br>
            {{/each}}
        {{else}}
            {{> addressForm}}
        {{/if}}

    {{else}}
        <p>Vous avez déjà donné une adresse :</p><br>
        <a href="" class="actualAddresslink1"><p>Je souhaite mettre à disposition mon adresse actuelle </p></a>
        <a href="" class="actualAddresslink2"><p>Je souhaite ajouter une autre adresse </p></a>
    {{/if}}
</template>

<template name="updateAccommodation">
        {{clearSession}}  
        {{#if Template.subscriptionsReady}}

        <!-- Update accommodation template -->

        <h2>Proposition de logements</h2>
        <form class="updateAccommodation">
            {{> addressForm}}        
            {{> calendar_template}}
            <button type="submit">Mettre à jour</button>
        </form>

        {{/if}}
</template>
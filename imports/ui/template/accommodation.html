<!--
<template name="accommodationsList">
    <ul>
    {{#each accommodation }}
        <li class='adresse {{selectedAdresse}}'>{{ address }} {{additionalAddress}}, {{zipCode}} {{location}} {{loc_number}}</li>
    {{/each}}
    </ul>
</template>
-->

<!--Super template-->

<template name="accommodationTemplate">
    {{#if currentUser}}
    <!-- check if there is a host room for the current user-->
    {{#if isAccommodation}}
        {{> updateAccommodation}}
    {{else}}
        {{> addAccommodation}}
    {{/if}}
    {{/if}}
</template>

<template name="addAccommodation">

    <!-- add accommotations templates -->

    <h2>Proposition de logements</h2>
    <form class="addAccommodation">  
    {{clearSession}}  
    {{#if Template.subscriptionsReady}}

    <!-- look for host profil address -->

        {{#if actual_location}}
            {{> actualAddress}}
        {{else}}
            {{> addressForm}}
        {{/if}}
    {{/if}}

    <!-- Fire simpleCal template -->
    {{> calendar_template}}

    <button type="submit">Terminer</button>
    </form>
</template>

<template name="addressForm">
    <!-- add/update address form : available for addAccommodation template and updateAccomodation -->
    <fieldset>
        {{#if Template.subscriptionsReady}}
        {{#if isLocation}}
                <legend>Adresse d'accueil actuelle</legend>
                <label for="address">Adresse du logement</label>
                <input type="text" name="address" id="address" value="{{availableLocation.[0]}}" required><br>

                <label for="num">N°</label> 
                <input type="text" name="locationNumber" id="locationNumber" value="{{availableLocation.[1]}}" required><br>

                <label for="zipCode">NPA</label>
                <input type="text" name="zipCode" id="zipCode" value="{{availableLocation.[3]}}" required><br>
    
                <label for="location">Localité</label>
                <input type="text" name="location" id="location" value="{{availableLocation.[2]}}" required><br> 
                
                <label for="availablePlaces">Nombre de personnes</label>
                <input type="text" name="availablePlaces" id="availablePlaces" value="{{availableLocation.[4]}}" required >
            {{else}}
                <legend>Ajouter une adresse</legend> 
                <label for="address">Rue</label>        
                <input type="text" name="address" id="address" placeholder="Adresse" required><br>

                <label for="num">N°</label> 
                <input type="text" name="locationNumber" id="locationNumber" placeholder="Numéro" required><br>

                <label for="zipCode">NPA</label>
                <input type="text" name="zipCode" id="zipCode" placeholder="NPA" required><br>
    
                <label for="location">Localité</label>
                <input type="text" name="location" id="location" placeholder="Localité" required><br> 

                <label for="availablePlaces">Nombre de personnes</label>
                <input type="number" name="availablePlaces" id="availablePlaces" placeholder="Nombre de personnes" required>

        {{/if}}
        {{/if}}
    </fieldset>
</template>

<template name="actualAddress">

    <!-- check if host profil has an address if true suggest add the same address -->
    <!-- actualAdress template reloads the actual adress of the host from hes profil information -->
    {{#if sessionReady}}
        {{#if linkValue}}

            <legend>Adresse d'accueil actuelle</legend>
            <label for="address">Adresse du logement</label>
            <input type="text" name="address" id="address" value="{{actualAddressValue.[0]}}"><br>

            <label for="num">N°</label> 
            <input type="text" name="locationNumber" id="locationNumber" value="empty"><br>

            <label for="zipCode">NPA</label>
            <input type="text" name="zipCode" id="zipCode" value="{{actualAddressValue.[2]}}"><br>

            <label for="location">Localité</label>
            <input type="text" name="location" id="location" value="{{actualAddressValue.[1]}}"><br> 
            
            <label for="availablePlaces">Nombre de personnes</label>
            <input type="text" name="availablePlaces" id="availablePlaces" value="à remplir" >

<!--
            {{#each actualAddressValue}}
                <span>{{this}}</span><br>
            {{/each}}
-->            
        {{else}}
            {{> addressForm}}
        {{/if}}

    {{else}}
        <p>Vous avez déjà donné une adresse :</p><br>
        <a href="" class="actualAddresslink1"><p>Je souhaite mettre à disposition mon adresse actuelle </p></a>
        <a href="" class="actualAddresslink2"><p>Je souhaite ajouter une autre adresse </p></a>
    {{/if}}
</template>

<template name="updateAccommodation">
        {{#if Template.subscriptionsReady}}
        {{clearSession}}

        <!-- Update accommodation template -->

        <h2>Proposition de logements</h2>
        <form class="updateAccommodation">
            {{getSession}}
            {{> addressForm}}        
            {{> calendar_template}}
            <button type="submit">Mettre à jour</button>
        </form>

        {{/if}}
</template>